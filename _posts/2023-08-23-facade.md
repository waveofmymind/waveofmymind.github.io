---
title: "SRP를 지키기 위한 파사드 패턴 적용기"
date: 2023-08-23 09:29:00 +0900
aliases: 
tags: [Facade,Design Pattern]
categories: [Spring]
---

면접 예상 질문 서비스를 구현하면서 Controller 단에 많은 서비스 인터페이스가 사용되게 되었고, 이를 개선하고자 `Facade`패턴을 적용하게 된 글을 공유하고자합니다.

## **AS-IS**

우선 면접 예상 질문을 생성하기 위한 매핑 함수가 포함된, `ResumeController`입니다.

```kotlin
@RestController
class ResumeController(
	private val promptService: PromptService,
	private val requestFormMapper: RequestFormMapper,
	private val completionService: CompletionService,
	private val objectMapper : ObjectMapper
) {
	// ...
}
```

면접 예상 질문을 생성하기 위해서는 다음과 같은 로직이 수행됩니다.

1. 해당하는 프롬프트를 조회한다.
2. 조회한 프롬프트를 사용해서 매퍼 클래스를 이용해 컴플리션 데이터를 생성한다.
3. AI 서비스를 이용하기 위해 OpenFeign을 사용해서 요청한다.
4. 응답 JSON 데이터를 ObjectMapper를 사용해서 바인딩한다.

즉, 사용되어야 하는 서비스 인터페이스만

- PromptService
- RequestFormMapper
- CompletionService
- ObjectMapper

이기 때문에, 이를 어느 한 서비스에서 사용하는 것도 애매했고, 면접 예상 질문 서비스의 Controller 클래스에서 의존하여 사용하게 되었습니다.

그리고 지금은 개발 초기 단계여서 추후 책임을 구분하여 더 많은 서비스 인터페이스를 생성하게 될 여지도 있기 때문에 클래스 추가 -> 컨트롤러 클래스의 변경을 야기했습니다.

즉, 컨트롤러에서는 SRP를 지키지 못할 것이라고 판단했습니다.

그래서 이를 해결하고자, 컨트롤러가 변경되어야할 이유를 하나로 만들기 위해서 `Facade 패턴`을 적용해보고자 했습니다.

## **Facade 패턴**

> 다른 클래스들의 복잡한 집합에 대한 단순화된 인터페이스를 제공하는 구조적 디자인 패턴

![introduce](/assets/img/2023-08-23-facade/introduce.webp)

다양한 서비스 인터페이스를 의존하여 사용하는 컨트롤러에서, 중간에 퍼사드라고 하는 하나의 계층을 두어 컨트롤러에서는 하나의 인터페이스만을 제공하기 위해서 사용될 수 있습니다.

## 작성중

## **TO-BE**
