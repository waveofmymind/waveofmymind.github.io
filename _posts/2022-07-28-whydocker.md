---
title: "Why Docker?"
date: 2022-07-28 19:29:00 +0900
tags: [devops, docker]
categories: [DevOps]
---

> ì´ ê¸€ì€ ì‚¬ë‚´ ì •ë³´ ê³µìœ ë¥¼ ìœ„í•´ ì‘ì„±ë˜ì—ˆê¸° ë•Œë¬¸ì— Java ê°œë°œí™˜ê²½ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.
{: .prompt-info }

## Docker ëŠ” ë¬´ì—‡ì¼ê¹Œ?

Docker
: Linux ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì»¨í…Œì´ë„ˆí™” ê¸°ìˆ , ê·¸ë¦¬ê³  ê·¸ ê¸°ìˆ ì„ ì§€ì›í•˜ëŠ” ê°€ì¥ í° íšŒì‚¬ì˜ ì´ë¦„ì´ì ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì˜ ì´ë¦„

![deploy-history](/assets/img/whydocker/deploy-history.png)
_ëˆ„êµ¬ë‚˜ docker ì— ëŒ€í•´ ê²€ìƒ‰í•˜ë©´ í•œë²ˆì¯¤ ë´¤ì„ ê·¸ ê·¸ë¦¼_

2013ë…„ì— ë“±ì¥í•œ ëœëŠ” ì¸í”„ë¼ ì„¸ê³„ë¥¼ ì»¨í…Œì´ë„ˆ ì„¸ìƒìœ¼ë¡œ ë°”ê¿”ë²„ë ¸ë‹¤. ìˆ˜ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ê³  ë„ì»¤íŒŒì¼ì„ ë§Œë“¤ì–´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•˜ëŠ”ê²Œ í”í•œ ê°œë°œ í”„ë¡œì„¸ìŠ¤ê°€ ë˜ì—ˆë‹¤. 2019ë…„ DockerCon ë°œí‘œì—ì„  ë¬´ë ¤ 1052ì–µë²ˆì˜ ì»¨í…Œì´ë„ˆ image pull ì´ ë°œìƒí–ˆë‹¤ê³  í•œë‹¤.

Docker ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨í…Œì´ë„ˆë¥¼ ë§¤ìš° ê°€ë²¼ìš´ ëª¨ë“ˆì‹ ê°€ìƒë¨¸ì‹ ì²˜ëŸ¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤. ë˜í•œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì¶•, ë°°í¬, ë³µì‚¬í•˜ê³  í•œ í™˜ê²½ì—ì„œ ë‹¤ë¥¸ í™˜ê²½ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë“± ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í´ë¼ìš°ë“œì— ìµœì í™”í•˜ë„ë¡ ì§€ì›í•œë‹¤.

## ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ ì´ì 

### ì–´ë””ì„œë‚˜ ë™ì¼í•œ ë™ì‘ì„ ë³´ì¥

ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ë§Œ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ë©´ ë„ì»¤ ì»¨í…Œì´ë„ˆëŠ” ì–´ë””ì—ì„œë“  ê°™ì€ ë™ì‘ì„ ë³´ì¥í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´ WindowOSë¥¼ ì‚¬ìš©í•˜ëŠ” íŒ€ì›A ì™€  MacOS ë¥¼ ì‚¬ìš©í•˜ëŠ” íŒ€ì›B ëŠ” ì„œë¡œ ë‹¤ë¥¸ OS ìœ„ì—ì„œ ì‘ì—…ì„ í•˜ê³  ìˆì§€ë§Œ, ë„ì»¤íŒŒì¼ì„ í†µí•œ ì´ë¯¸ì§€ë¥¼ ê³µìœ í•˜ê¸°ë§Œ í•œë‹¤ë©´ OS ì— êµ¬ì• ë°›ì§€ ì•Šê³  ê°™ì€ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ë°°í¬ ë˜í•œ ë§ˆì°¬ê°€ì§€ì´ë‹¤. ì´ë¯¸ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì •ìƒ ê²°ê³¼ë¥¼ í™•ì¸í–ˆë‹¤ë©´, ì–´ë””ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë”ë¼ë„ ë³„ë„ì˜ ì„¤ì •ì—†ì´ ì •ìƒ ë™ì‘í•  ê²ƒì´ë‹¤.

### ëª¨ë“ˆì„±

Docker ì˜ ì»¨í…Œì´ë„ˆí™” ì ‘ê·¼ ë°©ì‹ì€ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¶„í•´í•  í•„ìš”ì—†ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¼ë¶€ë¥¼ ë¶„í•´í•˜ê³ , ì—…ë°ì´íŠ¸ ë˜ëŠ” ë³µêµ¬í•˜ëŠ” ëŠ¥ë ¥ì— ì§‘ì¤‘ë˜ì–´ ìˆë‹¤. ì‚¬ìš©ìëŠ” ì´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ë°©ì‹ ì™¸ì—ë„ SOA(service-oriented architecture)ì˜ ì‘ë™ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ë©€í‹°í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ì´ì— í”„ë¡œì„¸ìŠ¤ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

### ê³„ì¸µ ë° ì´ë¯¸ì§€ ë²„ì „ ì œì–´

ê° Docker ì´ë¯¸ì§€ íŒŒì¼ì€ ì¼ë ¨ì˜ ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì ¸ìˆìœ¼ë©° ì´ ê³„ì¸µë“¤ì€ ë‹¨ì¼ ì´ë¯¸ì§€ë¡œ ê²°í•©ëœë‹¤.

Docker ëŠ” ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì¶•(Build)í•  ë•Œ ì´ëŸ¬í•œ ê³„ì¸µì„ ì¬ì‚¬ìš©í•˜ë¯€ë¡œ Build ê°€ í›¨ì”¬ ë¹¨ë¼ì§„ë‹¤. ì¤‘ê°„ ë³€ê²½ì‚¬í•­ì´ ì´ë¯¸ì§€ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ë¯€ë¡œ ì†ë„, ê·œëª¨, íš¨ìœ¨ì„±ì´ ë” ê°œì„ ëœë‹¤.

### ì‹ ì†í•œ ë°°í¬

Docker ê¸°ë°˜ ì»¨í…Œì´ë„ˆëŠ” ë°°í¬ ì‹œê°„ì„ ëª‡ ì´ˆë¡œ ë‹¨ì¶•í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ì»¨í…Œì´ë„ˆë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì´ë™í•˜ê¸° ìœ„í•´ OS ë¥¼ ë¶€íŒ…í•  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ ë°°í¬ ì‹œê°„ì´ í¬ê²Œ ë‹¨ì¶•ëœë‹¤. ì´ ë¿ë§Œ ì•„ë‹ˆë¼ ë°°í¬ ì†ë„ê°€ ë¹¨ë¼ ì»¨í…Œì´ë„ˆì—ì„œ ìƒì„±ëœ ë°ì´í„°ë¥¼ ë¹„ìš©íš¨ìœ¨ì ìœ¼ë¡œ ì‰½ê²Œ ìƒì„±í•˜ê³  ì‚­ì œí•  ìˆ˜ ìˆê³  ì‚¬ìš©ìëŠ” ì œëŒ€ë¡œ ìƒì„± í˜¹ì€ ì‚­ì œë˜ì—ˆëŠ”ì§€ ìš°ë ¤í•  í•„ìš”ê°€ ì—†ë‹¤.

ì¦‰, **Docker ê¸°ìˆ ì€ íš¨ìœ¨ì„±ì„ ì¤‘ì‹œí•˜ë©° ë” ì„¸ë¶„í™”ë˜ê³  ì œì–´ ê°€ëŠ¥í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ë°©ì‹**ì´ë‹¤.

### ë¡¤ë°±

ë„ì»¤ë¡œ ë°°í¬í•  ê²½ìš° ì‚¬ìš©í•˜ëŠ” ì´ë¯¸ì§€ëŠ” tag ë¥¼ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 1.2 ë²„ì „ì˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬í•˜ì˜€ì„ ë•Œ, 1.1 ë²„ì „ì˜ ì´ë¯¸ì§€ê°€ ì €ì¥ì†Œì— ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ìëŠ” jar íŒŒì¼ì„ ë‹¤ì‹œ ì¤€ë¹„í•  í•„ìš”ì—†ì´ run ëª…ë ¹ë§Œ ì‹¤í–‰í•˜ë©´ ëœë‹¤.

```bash
docker run --name app image:1.2
docker stop app

## 1.1 ë²„ì „ì„ ì‹¤í–‰
docker run --name app image:1.1
```

## ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ê³¼ í›„ë¡œ ë¹„êµí•´ë³´ê¸°

ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ ë°°í¬ë°©ì‹ì— ë¹„í•˜ì—¬ í›¨ì”¬ ë¹ ë¥´ê³  ìœ ì—°í•œ ë°°í¬ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.

### ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°°í¬

1. ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ë°°í¬í•  `jar` íŒŒì¼ì„ íŒ¨í‚¤ì§•í•˜ì—¬ ì¤€ë¹„í•œë‹¤.
2. `scp` ë“± íŒŒì¼ ì „ì†¡ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ìš´ì˜ ì„œë²„ë¡œ `jar` íŒŒì¼ì„ ì „ì†¡í•œë‹¤.
3. status ê´€ë¦¬ë¥¼ ìœ„í•´ `systemctl` ë“±ì„ ì‚¬ìš©í•˜ì—¬ service íŒŒì¼ì„ ì‘ì„±í•œë‹¤.
4. `systemctl start app` ìœ¼ë¡œ application ì„ ì‹¤í–‰í•œë‹¤.

ë§Œì•½ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì•±ì„ ì‹¤í–‰ ì¤‘ì¼ ê²½ìš°ëŠ” ì¤‘ì§€ëœ ì•±ì„ ì°¾ëŠ” ê³¼ì • ë“± ë³µì¡ì„±ì´ ë§¤ìš° í¬ê²Œ ì¦ê°€í•œë‹¤. ì—¬ëŸ¬ ì„œë²„ì—ì„œ ì—¬ëŸ¬ ì•±ì„ ì‹¤í–‰ ì¤‘ì¼ ê²½ìš°ì—ë„ ë³„ë°˜ ë‹¤ë¥´ì§€ ì•Šìœ¼ë©° ì„œë²„ë¥¼ ì´ë™í•˜ë©° ëª…ë ¹ì–´ë¥¼ ì³ì•¼í•´ì„œ ë”ìš± í”¼ê³¤í•œ ê³¼ì •ì„ ê±°ì³ì•¼ í•œë‹¤.

### ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•œ ë°°í¬

1. `Dockerfile` ì„ ì‚¬ìš©í•˜ì—¬ application ì„ ì´ë¯¸ì§€í™”í•œë‹¤. â†’ Build âš’ï¸
2. Dockerhub, gitlab registry ë“± ì €ì¥ì†Œì— imageë¥¼ `push` í•œë‹¤. â†’ ShippingğŸš¢
3. ìš´ì˜ ì„œë²„ì—ì„œ `docker run image` ì„ ì‹¤í–‰í•˜ì—¬ application ì„ ì‹¤í–‰í•œë‹¤.

ë³µì¡í•œ ê²½ë¡œ ì„¤ì • ë° íŒŒì¼ ì „ì†¡ê³¼ì •ì—ì„œ ì‹œê°„ì„ ë‚­ë¹„í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, ë„ì»¤ëŠ” í™˜ê²½ì„ ê°€ë¦¬ì§€ ì•Šìœ¼ë¯€ë¡œ ì–´ë””ì„œë‚˜ ì‹¤í–‰ì´ ë³´ì¥ë˜ì–´ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.

Docker ëŠ” ë‹¨ì¼ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ì— ì í•©í•˜ë„ë¡ ë§Œë“¤ì–´ì ¸ ìˆë‹¤. ìˆ˜ë°± ê°œë¡œ ì„¸ë¶„í™”ëœ ì»¨í…Œì´ë„ˆì™€ ì»¨í…Œì´ë„ˆí™”ëœ ì•±ì„ ì ì  ë” ë§ì´ ì‚¬ìš©í•˜ê¸° ì‹œì‘í•˜ë©´ ê´€ë¦¬ì™€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì´ ë§¤ìš° ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆë‹¤. ê²°êµ­ ëª¨ë“  ì»¨í…Œì´ë„ˆ ì „ì²´ì—ì„œ ë„¤íŠ¸ì›Œí‚¹, ë³´ì•ˆ, í…”ë ˆë©”íŠ¸ë¦¬ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œëŠ” í•œ ê±¸ìŒ ë¬¼ëŸ¬ë‚˜ì„œ ì»¨í…Œì´ë„ˆë¥¼ ê·¸ë£¹í™”í•´ì•¼í•œë‹¤. ë°”ë¡œ ì—¬ê¸°ì— ì¿ ë²„ë„¤í‹°ìŠ¤[^footnote]ê°€ ì‚¬ìš©ëœë‹¤.

## ì–¸ì œ ì¨ì•¼í• ê¹Œ?

ë¶„ì•¼ë¥¼ ê°€ë¦¬ì§€ ì•Šê³  ê°œë°œìë¼ë©´ ê±°ì˜ ëª¨ë“  ìƒí™©ì—ì„œ ë„ì»¤ë¥¼ ë§¤ìš° ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì‚¬ì‹¤ ê°œë°œ ë° ë°°í¬, ìš´ì˜ì„ í¬í•¨í•œ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì—ì„œ ì¼ë°˜ì ì¸ ë°©ë²•ë³´ë‹¤ ë„ì»¤ê°€ ë” ìš°ì›”í•œ ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆëŠ” í•­ìƒ 1ìˆœìœ„ë¡œ ê³ ë ¤ë˜ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.

1. PostgreSQL ë“± ë¡œì»¬ë¨¸ì‹ ì— ê°œë°œìš© DB ê°€ í•„ìš”í•œ ê²½ìš°
2. ìƒˆë¡œìš´ ê¸°ìˆ ì„ í…ŒìŠ¤íŠ¸í•´ë³´ê±°ë‚˜ ê°„ë‹¨í•˜ê²Œ ë„ì…í•´ë³´ê³  ì‹¶ì€ ê²½ìš°
3. ì„¤ì¹˜ë‚˜ ì‚­ì œ ê³¼ì •ì´ ê¹Œë‹¤ë¡œìš´ ì†Œí”„íŠ¸ì›¨ì–´ ë“± ë¡œì»¬ ë¨¸ì‹ ì— ì§ì ‘ ì„¤ì¹˜í•˜ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ìš´ ê²½ìš° (ex. JavaëŠ” ìœˆë„ìš°ì—ì„œ ì¬ì„¤ì¹˜í•˜ê¸°ê°€ ì•„ì£¼ ë”ì°í•˜ë‹¤)
4. Front-end ë“± ë‹¤ë¥¸ íŒ€ì˜ ìµœì‹  ë°°í¬ ë²„ì „ì„ ë¡œì»¬ì—ì„œ ì‹¤í–‰ì‹œì¼œë³´ê³  ì‹¶ì€ ê²½ìš°
5. ìš´ì˜ ì„œë²„ë¥¼ NCP ì—ì„œ AWS ë¡œ ë°”ê¿”ì•¼í•˜ëŠ” ê²½ìš°

## Example

ê°„ë‹¨í•œ API server

```bash
docker run --name rest-server -p 80:8080 songkg7/rest-server
```

```bash
# curl ì‚¬ìš©ì‹œ
curl http://localhost/ping

# httpie ì‚¬ìš©ì‹œ
http localhost/ping
```

80 port ë¥¼ container ì˜ 8080 port ì™€ ë§¤í•‘í–ˆê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆì™€ ì˜ í†µì‹ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

> **ìì£¼ ì‚¬ìš©í•˜ëŠ” docker run options**
>
> `--name`
> : Assign a name to the container
>
> `-p`
> : publish a container's port(s) to the host
>
> `--rm`
> : Automatically remove the container when it exits
>
> `-i`
> : interactive, Keep STDIN open even if not attached ì…ì¶œë ¥ ê¸°ëŠ¥ì„ í—ˆìš©
>
> `-t`
> : tty, Allocate a pseudo-TTY, í„°ë¯¸ë„ê³¼ ë¹„ìŠ·í•œ í™˜ê²½ì„ ìƒì„±
>
> `-v`
> : Bind mount a volume
{: .prompt-tip }

## Conclusion

ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ ì „í†µì ì¸ ë°°í¬ ë°©ì‹ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œ í¸ë¦¬í•œ ìš´ì˜ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ë‹¤ìŒì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” `Dockerfile` ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.

## Reference

- [Redhat - Docker(ë„ì»¤) ë€?](https://www.redhat.com/ko/topics/containers/what-is-docker)

---

[^footnote]: [kubernetes](https://songkg7.github.io/posts/kubernetes-start/)
