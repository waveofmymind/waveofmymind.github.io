---
title: "DB 레플리케이션 적용기(with AWS RDS)"
date: 2023-06-19 09:29:00 +0900
aliases: 
tags: [MySQL,AWS,AWS RDS,Replication]
categories: [Spring]
---

기존 굿잡 프로젝트에서는 단일 DB로 데이터를 저장하고 조회하는 방식을 처리했습니다. 
해당 DB 구조는 일반적으로 간단한 프로젝트에서 자주 사용하는 구조입니다.

하지만 이러한 구조는 다음과 같은 문제가 있습니다.

- 하나의 DB로 쓰기와 조회를 동시에 처리하게 됩니다.
- DB 장애시 DB를 사용하는 모든 기능 동작이 멈추게 됩니다.
- 하나의 DB가 모든 부하를 감당하게 됩니다.

이러한 문제는 하나의 DB를 사용하기 때문에 생기는 문제입니다. 현재 굿잡에서 받는 트래픽에서 리플리케이션을 적용할만큼의 성능 이슈가 일어나지 않습니다. 하지만 리플리케이션은 트래픽 뿐만 아닌, 단일 장애점 방지, 백업의 이유도 있습니다. 이러한 이유로 리플리케이션을 적용하기로 결정했습니다.

리플리케이션은 다음과 같은 장점이 있습니다.

- 스케일 아웃: 여러 대의 DB를 늘려 성능 처리의 향상을 꾀할 수 있습니다.
- 데이터 백업: 다수의 DB에 데이터를 동기화시켜 저장해놓기 때문에 데이터 백업이 자연스럽게 됩니다.
- 단일 장애점 방지: 여러 대의 Replica DB를 두기 때문에 하나의 Replica DB가 고장나도 기능을 수행할 수 있습니다.

![replication](/assets/img/2023-06-20-replication/replication1.webp)

현재 프로젝트는 트래픽이 많지 않아 하나의 Source와 한개의 Replica로 구성하게 되었습니다.

## RDB 읽기 전용 복제본 생성

우선 저는 현재 프로젝트에서 AWS RDB - MySQL을 사용하고 있습니다.

AWS에서는 읽기 전용 복제본을 쉽게 생성할 수 있도록 도와주고 있는데요.

![replication](/assets/img/2023-06-20-replication/replication2.webp)

위와 같이 복제하고자 하는 DB를 선택하고 작업 탭에서 '읽기 전용 복제본 생성'을 누르면 됩니다.

저는 이미 생성해 놓았기 때문에 두번째에 replica라는 DB가 생성되어 있는 것입니다.

![replication](/assets/img/2023-06-20-replication/replication3.webp)

누르면 설정을 하는 페이지가 나오는데, 그 중  퍼블릭 액세스 허용을, 그리고 암호 인증을 통해 사용할 수 있도록 설정했습니다.

그리고 맨 밑에 삭제 방지 활성화를 키고 생성을 하면 됩니다.








